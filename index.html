<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ–å­¦çµåˆã‚’å­¦ã¼ã†ï¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .section {
            background: white;
            margin: 30px 0;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2rem;
            display: flex;
            align-items: center;
        }

        .section h2::before {
            content: "ğŸ”—";
            margin-right: 10px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .bond-simulator {
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .element-selector {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .element-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .element-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        .h-btn { background: linear-gradient(45deg, #ff6b6b, #ff8e8e); color: white; }
        .o-btn { background: linear-gradient(45deg, #4ecdc4, #7fdbda); color: white; }
        .c-btn { background: linear-gradient(45deg, #45b7d1, #6cc3d6); color: white; }
        .n-btn { background: linear-gradient(45deg, #a8e6cf, #88d8a3); color: white; }
        .f-btn { background: linear-gradient(45deg, #ffd93d, #ffb74d); color: white; }
        .na-btn { background: linear-gradient(45deg, #ba68c8, #ce93d8); color: white; }
        .cl-btn { background: linear-gradient(45deg, #81c784, #a5d6a7); color: white; }

        .bond-arena {
            height: 500px;
            background: linear-gradient(45deg, #f0f8ff, #e6f3ff);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            border: 3px solid #667eea;
            margin: 20px 0;
        }

        .atom-with-electrons {
            position: absolute;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .atom-nucleus {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            position: relative;
            z-index: 2;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .nucleus-h { background: linear-gradient(45deg, #ff6b6b, #ff8e8e); }
        .nucleus-o { background: linear-gradient(45deg, #4ecdc4, #7fdbda); }
        .nucleus-c { background: linear-gradient(45deg, #45b7d1, #6cc3d6); }
        .nucleus-n { background: linear-gradient(45deg, #a8e6cf, #88d8a3); }
        .nucleus-f { background: linear-gradient(45deg, #ffd93d, #ffb74d); }
        .nucleus-na { background: linear-gradient(45deg, #ba68c8, #ce93d8); }
        .nucleus-cl { background: linear-gradient(45deg, #81c784, #a5d6a7); }

        .electron-shell {
            position: absolute;
            border: 2px dashed #667eea;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .valence-shell {
            width: 100px;
            height: 100px;
        }

        .electron {
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #ff4444, #cc0000);
            border-radius: 50%;
            position: absolute;
            animation: electronOrbit 3s linear infinite;
            box-shadow: 0 0 8px rgba(255, 68, 68, 0.6);
        }

        @keyframes electronOrbit {
            from { transform: rotate(0deg) translateX(45px) rotate(0deg); }
            to { transform: rotate(360deg) translateX(45px) rotate(-360deg); }
        }

        .moving-electron {
            animation: electronTransfer 2s ease-in-out;
        }

        @keyframes electronTransfer {
            0% { transform: translate(0, 0); opacity: 1; }
            50% { transform: translate(var(--dx), var(--dy)); opacity: 0.7; }
            100% { transform: translate(var(--dx), var(--dy)); opacity: 1; }
        }

        .shared-electron-pair {
            position: absolute;
            z-index: 3;
        }

        .shared-electron {
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, #4444ff, #0000cc);
            border-radius: 50%;
            position: absolute;
            animation: sharedOrbit 2s linear infinite;
            box-shadow: 0 0 6px rgba(68, 68, 255, 0.6);
        }

        @keyframes sharedOrbit {
            0% { transform: translateX(-15px); }
            50% { transform: translateX(15px); }
            100% { transform: translateX(-15px); }
        }

        .ion-charge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            z-index: 4;
        }

        .positive-charge {
            color: #ff4444;
            border: 2px solid #ff4444;
        }

        .negative-charge {
            color: #4444ff;
            border: 2px solid #4444ff;
        }

        .electronegativity-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(90deg, #ff6b6b, #ffd93d, #4ecdc4);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            color: white;
            font-weight: bold;
        }

        .scale-item {
            text-align: center;
            flex: 1;
        }

        .explanation {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #ff9a9e;
        }

        .bond-types-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .bond-type-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 3px solid transparent;
        }

        .covalent-section { border-color: #4ecdc4; }
        .ionic-section { border-color: #ff6b6b; }
        .metallic-section { border-color: #ffd93d; }
        .intermolecular-section { border-color: #ba68c8; }

        .bond-animation {
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            position: relative;
        }

        .polarity-demo {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .polarity-molecule {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            position: relative;
        }

        .electron-cloud {
            position: absolute;
            background: radial-gradient(ellipse, rgba(255, 68, 68, 0.3), transparent);
            border-radius: 50%;
            animation: cloudShift 3s ease-in-out infinite;
        }

        @keyframes cloudShift {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(20px); }
        }

        .crystal-lattice {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 5px;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            max-width: 400px;
            margin: 20px auto;
        }

        .crystal-ion {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 0.8rem;
            animation: crystalPulse 2s infinite;
        }

        @keyframes crystalPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .metal-lattice {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border-radius: 10px;
            max-width: 300px;
            margin: 20px auto;
            position: relative;
        }

        .metal-atom {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: radial-gradient(circle, #c0c0c0, #808080);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #333;
            animation: metalGlow 2s infinite;
        }

        @keyframes metalGlow {
            0%, 100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8); }
        }

        .electron-sea {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #4444ff, #0000cc);
            border-radius: 50%;
            animation: electronSea 4s linear infinite;
        }

        @keyframes electronSea {
            0% { transform: translate(0, 0); }
            25% { transform: translate(200px, 50px); }
            50% { transform: translate(50px, 150px); }
            75% { transform: translate(150px, 20px); }
            100% { transform: translate(0, 0); }
        }

        .molecule-3d {
            perspective: 1000px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        .molecule-container {
            transform-style: preserve-3d;
            animation: rotate3d 6s infinite linear;
            position: relative;
        }

        @keyframes rotate3d {
            from { transform: rotateX(0deg) rotateY(0deg); }
            to { transform: rotateX(360deg) rotateY(360deg); }
        }

        .molecule-atom {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 0.9rem;
        }

        .polymer-demo {
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .polymerization-type {
            margin: 30px 0;
            padding: 25px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .reaction-animation {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            min-height: 100px;
            position: relative;
        }

        .monomer {
            padding: 15px 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 10px;
            color: white;
            font-weight: bold;
            margin: 5px;
            position: relative;
            animation: monomerFloat 2s ease-in-out infinite;
        }

        @keyframes monomerFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .functional-group {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff6b6b;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }

        .byproduct {
            background: #95a5a6;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            animation: fadeOut 3s ease-out;
        }

        @keyframes fadeOut {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-30px); }
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            background: #f0f0f0;
        }

        .tab {
            flex: 1;
            padding: 15px;
            background: #f0f0f0;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin: 5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .bond-arena { height: 400px; }
            .crystal-lattice { grid-template-columns: repeat(4, 1fr); }
            .metal-lattice { grid-template-columns: repeat(3, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ”— åŒ–å­¦çµåˆã‚’å­¦ã¼ã†ï¼ ğŸ”—</h1>
            <p>æœ€å¤–æ®»é›»å­ã®å‹•ãã§çµåˆã‚’ç†è§£ã—ã‚ˆã†</p>
        </header>

        <div class="section">
            <h2>1. é›»æ°—é™°æ€§åº¦ã¨ã¯ï¼Ÿ</h2>
            <div class="explanation">
                <p><strong>é›»æ°—é™°æ€§åº¦</strong>ã¨ã¯ã€åŸå­ãŒé›»å­ã‚’å¼•ãã¤ã‘ã‚‹åŠ›ã®å¼·ã•ã§ã™ã€‚ã“ã®åŠ›ã®é•ã„ãŒçµåˆã®ç¨®é¡ã‚’æ±ºã‚ã¾ã™ï¼</p>
            </div>
            
            <div class="electronegativity-scale">
                <div class="scale-item">
                    <div>Na</div>
                    <div>0.9</div>
                    <div>å¼±ã„</div>
                </div>
                <div class="scale-item">
                    <div>C</div>
                    <div>2.5</div>
                    <div>ä¸­é–“</div>
                </div>
                <div class="scale-item">
                    <div>O</div>
                    <div>3.5</div>
                    <div>å¼·ã„</div>
                </div>
                <div class="scale-item">
                    <div>F</div>
                    <div>4.0</div>
                    <div>æœ€å¼·</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>2. é›»å­ã®å‹•ãã§çµåˆã‚’è¦³å¯Ÿã—ã‚ˆã†ï¼</h2>
            <div class="bond-simulator">
                <h3>ğŸ® æœ€å¤–æ®»é›»å­ã¨çµåˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h3>
                <div class="element-selector">
                    <button class="element-btn h-btn" onclick="selectElement('H', 2.1, 1)">H (1å€‹)</button>
                    <button class="element-btn o-btn" onclick="selectElement('O', 3.5, 6)">O (6å€‹)</button>
                    <button class="element-btn c-btn" onclick="selectElement('C', 2.5, 4)">C (4å€‹)</button>
                    <button class="element-btn f-btn" onclick="selectElement('F', 4.0, 7)">F (7å€‹)</button>
                    <button class="element-btn na-btn" onclick="selectElement('Na', 0.9, 1)">Na (1å€‹)</button>
                    <button class="element-btn cl-btn" onclick="selectElement('Cl', 3.0, 7)">Cl (7å€‹)</button>
                </div>
                
                <div class="bond-arena" id="bondArena">
                    <div style="position: absolute; top: 10px; left: 10px; background: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; max-width: 300px;">
                        <div id="bondInfo">åŸå­ã‚’2ã¤é¸ã‚“ã§é›»å­ã®å‹•ãã‚’è¦³å¯Ÿã—ã‚ˆã†ï¼<br>æ‹¬å¼§å†…ã¯æœ€å¤–æ®»é›»å­ã®æ•°ã§ã™ã€‚</div>
                    </div>
                </div>
                
                <button onclick="clearArena()">ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </div>

        <div class="section">
            <h2>3. çµåˆã®ç¨®é¡</h2>
            <div class="bond-types-container">
                <div class="bond-type-section covalent-section">
                    <h3>ğŸ¤ å…±æœ‰çµåˆ</h3>
                    <div class="explanation">
                        <p>é›»æ°—é™°æ€§åº¦ã®å·®ãŒ<strong>å°ã•ã„</strong>ã¨ãï¼ˆ0.4æœªæº€ï¼‰ã€é›»å­ã‚’å…±æœ‰ã—ã¦çµåˆã—ã¾ã™ã€‚</p>
                    </div>
                    
                    <div class="bond-animation">
                        <div class="atom-with-electrons">
                            <div class="atom-nucleus nucleus-h">H</div>
                            <div class="electron-shell valence-shell">
                                <div class="electron" style="animation-delay: 0s;"></div>
                            </div>
                        </div>
                        
                        <div class="shared-electron-pair" style="margin: 0 20px;">
                            <div class="shared-electron" style="animation-delay: 0s;"></div>
                            <div class="shared-electron" style="animation-delay: 1s;"></div>
                        </div>
                        
                        <div class="atom-with-electrons">
                            <div class="atom-nucleus nucleus-h">H</div>
                            <div class="electron-shell valence-shell">
                                <div class="electron" style="animation-delay: 0.5s;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <p><strong>ä¾‹ï¼š</strong> Hâ‚‚, Oâ‚‚, CHâ‚„ï¼ˆãƒ¡ã‚¿ãƒ³ï¼‰</p>
                    <p>ğŸ’¡ é›»å­ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ã€ä¸¡æ–¹ã®åŸå­ãŒå®‰å®šã«ãªã‚Šã¾ã™</p>
                </div>
                
                <div class="bond-type-section ionic-section">
                    <h3>âš¡ ã‚¤ã‚ªãƒ³çµåˆ</h3>
                    <div class="explanation">
                        <p>é›»æ°—é™°æ€§åº¦ã®å·®ãŒ<strong>å¤§ãã„</strong>ã¨ãï¼ˆ1.7ä»¥ä¸Šï¼‰ã€é›»å­ãŒå®Œå…¨ã«ç§»å‹•ã—ã¦ã‚¤ã‚ªãƒ³ã«ãªã‚Šçµåˆã—ã¾ã™ã€‚</p>
                    </div>
                    
                    <div class="bond-animation">
                        <div class="atom-with-electrons">
                            <div class="atom-nucleus nucleus-na">Na</div>
                            <div class="electron-shell valence-shell">
                                <div class="electron moving-electron" id="transferElectron"></div>
                            </div>
                            <div class="ion-charge positive-charge">+</div>
                        </div>
                        
                        <div style="margin: 0 30px; color: #667eea; font-size: 2rem;">â†’</div>
                        
                        <div class="atom-with-electrons">
                            <div class="atom-nucleus nucleus-cl">Cl</div>
                            <div class="electron-shell valence-shell">
                                <div class="electron" style="animation-delay: 0s;"></div>
                                <div class="electron" style="animation-delay: 0.3s;"></div>
                                <div class="electron" style="animation-delay: 0.6s;"></div>
                                <div class="electron" style="animation-delay: 0.9s;"></div>
                                <div class="electron" style="animation-delay: 1.2s;"></div>
                                <div class="electron" style="animation-delay: 1.5s;"></div>
                                <div class="electron" style="animation-delay: 1.8s;"></div>
                                <div class="electron" style="animation-delay: 2.1s;"></div>
                            </div>
                            <div class="ion-charge negative-charge">-</div>
                        </div>
                    </div>
                    
                    <p><strong>ä¾‹ï¼š</strong> NaClï¼ˆé£Ÿå¡©ï¼‰, MgOï¼ˆé…¸åŒ–ãƒã‚°ãƒã‚·ã‚¦ãƒ ï¼‰</p>
                    <p>ğŸ’¡ é›»å­ãŒå®Œå…¨ã«ç§»å‹•ã—ã¦é™½ã‚¤ã‚ªãƒ³ã¨é™°ã‚¤ã‚ªãƒ³ãŒå½¢æˆã•ã‚Œã¾ã™</p>
                </div>
                
                <div class="bond-type-section metallic-section">
                    <h3>âœ¨ é‡‘å±çµåˆ</h3>
                    <div class="explanation">
                        <p>é‡‘å±åŸå­åŒå£«ãŒä¾¡é›»å­ã‚’æ”¾å‡ºã—ã€<strong>é›»å­ã®æµ·</strong>ã‚’å½¢æˆã™ã‚‹çµåˆã§ã™ã€‚</p>
                    </div>
                    
                    <div class="metal-lattice">
                        <div class="metal-atom">Fe</div>
                        <div class="metal-atom">Fe</div>
                        <div class="metal-atom">Fe</div>
                        <div class="metal-atom">Fe</div>
                        <div class="metal-atom">Fe</div>
                        <div class="metal-atom">Fe</div>
                        <div class="metal-atom">Fe</div>
                        <div class="metal-atom">Fe</div>
                        <div class="metal-atom">Fe</div>
                        <div class="metal-atom">Fe</div>
                        
                        <div class="electron-sea" style="top: 20px; left: 30px;"></div>
                        <div class="electron-sea" style="top: 60px; left: 80px; animation-delay: 1s;"></div>
                        <div class="electron-sea" style="top: 100px; left: 50px; animation-delay: 2s;"></div>
                        <div class="electron-sea" style="top: 80px; left: 120px; animation-delay: 1.5s;"></div>
                    </div>
                    
                    <p><strong>ç‰¹å¾´ï¼š</strong> é›»æ°—ã‚’é€šã™ã€å»¶æ€§ãƒ»å±•æ€§ãŒã‚ã‚‹ã€é‡‘å±å…‰æ²¢</p>
                    <p>ğŸ’¡ è‡ªç”±é›»å­ãŒé‡‘å±ã‚¤ã‚ªãƒ³é–“ã‚’å‹•ãå›ã£ã¦ã„ã¾ã™</p>
                </div>
                
                <div class="bond-type-section intermolecular-section">
                    <h3>ğŸŒŠ åˆ†å­é–“åŠ›</h3>
                    <div class="explanation">
                        <p>åˆ†å­åŒå£«ã®<strong>å¼±ã„å¼•åŠ›</strong>ã§ã™ã€‚å…±æœ‰çµåˆã‚ˆã‚Šå¼±ã„ã§ã™ãŒã€ç‰©è³ªã®æ€§è³ªã«å¤§ããå½±éŸ¿ã—ã¾ã™ã€‚</p>
                    </div>
                    
                    <div class="bond-animation">
                        <div style="display: flex; align-items: center; gap: 30px;">
                            <div class="atom-with-electrons">
                                <div class="atom-nucleus nucleus-h">H</div>
                                <div class="atom-nucleus nucleus-o" style="margin-top: 40px;">O</div>
                                <div class="atom-nucleus nucleus-h" style="margin-top: 80px;">H</div>
                            </div>
                            
                            <div style="color: #ba68c8; font-size: 2rem;">Â·Â·Â·</div>
                            
                            <div class="atom-with-electrons">
                                <div class="atom-nucleus nucleus-h">H</div>
                                <div class="atom-nucleus nucleus-o" style="margin-top: 40px;">O</div>
                                <div class="atom-nucleus nucleus-h" style="margin-top: 80px;">H</div>
                            </div>
                        </div>
                    </div>
                    
                    <p><strong>ç¨®é¡ï¼š</strong> æ°´ç´ çµåˆã€ãƒ•ã‚¡ãƒ³ãƒ‡ãƒ«ãƒ¯ãƒ¼ãƒ«ã‚¹åŠ›</p>
                    <p>ğŸ’¡ åˆ†å­ã®éƒ¨åˆ†çš„ãªé›»è·ã«ã‚ˆã‚Šå¼±ã„å¼•åŠ›ãŒåƒãã¾ã™</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>4. åˆ†å­ã®å½¢ã¨æ¥µæ€§</h2>
            <div class="explanation">
                <p>åˆ†å­ã®å½¢ã¯é›»å­å¯¾ã®åç™ºã«ã‚ˆã£ã¦æ±ºã¾ã‚Šã€æ¥µæ€§ã¯é›»æ°—é™°æ€§åº¦ã®é•ã„ã‹ã‚‰ç”Ÿã¾ã‚Œã¾ã™ã€‚</p>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="showMoleculeTab('linear')">ç›´ç·šå½¢</button>
                <button class="tab" onclick="showMoleculeTab('bent')">æŠ˜ã‚Œç·šå½¢</button>
                <button class="tab" onclick="showMoleculeTab('tetrahedral')">æ­£å››é¢ä½“</button>
                <button class="tab" onclick="showMoleculeTab('trigonal')">ä¸‰è§’å½¢</button>
            </div>
            
            <div class="tab-content active" id="linear-tab">
                <div class="molecule-3d">
                    <div class="molecule-container">
                        <div class="molecule-atom nucleus-o" style="transform: translateX(-60px);">O</div>
                        <div class="molecule-atom nucleus-c" style="transform: translateX(0px);">C</div>
                        <div class="molecule-atom nucleus-o" style="transform: translateX(60px);">O</div>
                    </div>
                </div>
                
                <div class="polarity-demo">
                    <h4>COâ‚‚ã®æ¥µæ€§</h4>
                    <div class="polarity-molecule">
                        <div class="atom-nucleus nucleus-o">O</div>
                        <div class="electron-cloud" style="width: 40px; height: 40px; left: -20px;"></div>
                        <div style="margin: 0 20px;">====</div>
                        <div class="atom-nucleus nucleus-c">C</div>
                        <div style="margin: 0 20px;">====</div>
                        <div class="atom-nucleus nucleus-o">O</div>
                        <div class="electron-cloud" style="width: 40px; height: 40px; right: -20px;"></div>
                    </div>
                    <p>å¯¾ç§°ãªã®ã§å…¨ä½“ã§ã¯<strong>ç„¡æ¥µæ€§</strong></p>
                </div>
            </div>
            
            <div class="tab-content" id="bent-tab">
                <div class="molecule-3d">
                    <div class="molecule-container">
                        <div class="molecule-atom nucleus-o" style="transform: translateY(0px);">O</div>
                        <div class="molecule-atom nucleus-h" style="transform: translate(-30px, 40px);">H</div>
                        <div class="molecule-atom nucleus-h" style="transform: translate(30px, 40px);">H</div>
                    </div>
                </div>
                
                <div class="polarity-demo">
                    <h4>Hâ‚‚Oã®æ¥µæ€§</h4>
                    <div class="polarity-molecule">
                        <div style="position: relative;">
                            <div class="atom-nucleus nucleus-o">O</div>
                            <div class="electron-cloud" style="width: 60px; height: 60px; top: -30px; left: -10px;"></div>
                            <div class="atom-nucleus nucleus-h" style="position: absolute; top: 50px; left: -25px;">H</div>
                            <div class="atom-nucleus nucleus-h" style="position: absolute; top: 50px; right: -25px;">H</div>
                        </div>
                    </div>
                    <p>éå¯¾ç§°ãªã®ã§<strong>æ¥µæ€§ã‚ã‚Š</strong>ï¼ˆÎ´-ãŒOå´ã«åã‚‹ï¼‰</p>
                </div>
            </div>
            
            <div class="tab-content" id="tetrahedral-tab">
                <div class="molecule-3d">
                    <div class="molecule-container">
                        <div class="molecule-atom nucleus-c" style="transform: translateZ(0px);">C</div>
                        <div class="molecule-atom nucleus-h" style="transform: translate(0px, -50px) translateZ(30px);">H</div>
                        <div class="molecule-atom nucleus-h" style="transform: translate(0px, 50px) translateZ(-30px);">H</div>
                        <div class="molecule-atom nucleus-h" style="transform: translate(-50px, 0px) translateZ(0px);">H</div>
                        <div class="molecule-atom nucleus-h" style="transform: translate(50px, 0px) translateZ(0px);">H</div>
                    </div>
                </div>
                
                <div class="polarity-demo">
                    <h4>CHâ‚„ã®æ¥µæ€§</h4>
                    <div class="polarity-molecule">
                        <div style="position: relative;">
                            <div class="atom-nucleus nucleus-c">C</div>
                            <div class="atom-nucleus nucleus-h" style="position: absolute; top: -40px; left: 10px;">H</div>
                            <div class="atom-nucleus nucleus-h" style="position: absolute; bottom: -40px; right: 10px;">H</div>
                            <div class="atom-nucleus nucleus-h" style="position: absolute; left: -40px; top: 10px;">H</div>
                            <div class="atom-nucleus nucleus-h" style="position: absolute; right: -40px; bottom: 10px;">H</div>
                        </div>
                    </div>
                    <p>å®Œå…¨å¯¾ç§°ãªã®ã§<strong>ç„¡æ¥µæ€§</strong></p>
                </div>
            </div>
            
            <div class="tab-content" id="trigonal-tab">
                <div class="molecule-3d">
                    <div class="molecule-container">
                        <div class="molecule-atom" style="background: #9c27b0; transform: translateZ(0px);">B</div>
                        <div class="molecule-atom nucleus-f" style="transform: translate(0px, -50px);">F</div>
                        <div class="molecule-atom nucleus-f" style="transform: translate(-43px, 25px);">F</div>
                        <div class="molecule-atom nucleus-f" style="transform: translate(43px, 25px);">F</div>
                    </div>
                </div>
                
                <div class="polarity-demo">
                    <h4>BFâ‚ƒã®æ¥µæ€§</h4>
                    <div class="polarity-molecule">
                        <div style="position: relative;">
                            <div class="atom-nucleus" style="background: #9c27b0;">B</div>
                            <div class="atom-nucleus nucleus-f" style="position: absolute; top: -40px; left: 10px;">F</div>
                            <div class="atom-nucleus nucleus-f" style="position: absolute; bottom: 20px; left: -35px;">F</div>
                            <div class="atom-nucleus nucleus-f" style="position: absolute; bottom: 20px; right: -35px;">F</div>
                        </div>
                    </div>
                    <p>å¹³é¢å¯¾ç§°ãªã®ã§<strong>ç„¡æ¥µæ€§</strong></p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>5. çµæ™¶æ§‹é€ </h2>
            <div class="explanation">
                <p>ã‚¤ã‚ªãƒ³ã‚„åŸå­ã®è¦å‰‡çš„ãªé…åˆ—ãŒçµæ™¶ã‚’å½¢æˆã—ã¾ã™ã€‚çµåˆã®ç¨®é¡ã«ã‚ˆã£ã¦ç•°ãªã‚‹æ§‹é€ ã‚’æŒã¡ã¾ã™ã€‚</p>
            </div>
            
            <div class="bond-types-container">
                <div class="bond-type-section">
                    <h3>ğŸ’ ã‚¤ã‚ªãƒ³çµæ™¶ï¼ˆNaClå‹ï¼‰</h3>
                    <div class="crystal-lattice">
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                        <div class="crystal-ion nucleus-cl">Clâ»</div>
                        <div class="crystal-ion nucleus-na">Naâº</div>
                    </div>
                    <p><strong>ç‰¹å¾´ï¼š</strong> ç¡¬ã„ã€è„†ã„ã€èç‚¹ãŒé«˜ã„ã€é›»æ°—ã‚’é€šã•ãªã„</p>
                    <p>ğŸ’¡ é™½ã‚¤ã‚ªãƒ³ã¨é™°ã‚¤ã‚ªãƒ³ãŒäº¤äº’ã«é…åˆ—</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>6. é«˜åˆ†å­ã®ä¸–ç•Œ</h2>
            <div class="explanation">
                <p><strong>é«˜åˆ†å­</strong>ã¯ã€å°ã•ãªåˆ†å­ï¼ˆå˜é‡ä½“ï¼‰ãŒå¤šæ•°ã¤ãªãŒã£ãŸå·¨å¤§ãªåˆ†å­ã§ã™ã€‚é‡åˆã®ä»•æ–¹ã«ã‚ˆã£ã¦2ã¤ã®ã‚¿ã‚¤ãƒ—ãŒã‚ã‚Šã¾ã™ã€‚</p>
            </div>
            
            <div class="polymer-demo">
                <div class="polymerization-type">
                    <h3>ğŸ”— ä»˜åŠ é‡åˆ</h3>
                    <div class="explanation">
                        <p>äºŒé‡çµåˆãŒé–‹ã„ã¦å˜é‡ä½“åŒå£«ãŒç›´æ¥ã¤ãªãŒã‚‹é‡åˆã§ã™ã€‚å‰¯ç”Ÿæˆç‰©ã¯ç”Ÿæˆã•ã‚Œã¾ã›ã‚“ã€‚</p>
                    </div>
                    
                    <div class="reaction-animation" id="additionPolymer">
                        <div class="monomer">
                            C=C
                            <div class="functional-group">H</div>
                        </div>
                        <div style="font-size: 2rem; color: #667eea;">+</div>
                        <div class="monomer">
                            C=C
                            <div class="functional-group">H</div>
                        </div>
                        <div style="font-size: 2rem; color: #667eea;">+</div>
                        <div class="monomer">
                            C=C
                            <div class="functional-group">H</div>
                        </div>
                        <div style="font-size: 2rem; color: #667eea;">â†’</div>
                        <div class="monomer">-C-C-</div>
                        <div class="monomer">-C-C-</div>
                        <div class="monomer">-C-C-</div>
                    </div>
                    
                    <button onclick="startAdditionPolymerization()">ä»˜åŠ é‡åˆé–‹å§‹ï¼</button>
                    <p><strong>ä¾‹ï¼š</strong> ãƒãƒªã‚¨ãƒãƒ¬ãƒ³ã€ãƒãƒªãƒ—ãƒ­ãƒ”ãƒ¬ãƒ³ã€ãƒãƒªã‚¹ãƒãƒ¬ãƒ³</p>
                </div>
                
                <div class="polymerization-type">
                    <h3>ğŸ’§ ç¸®åˆé‡åˆ</h3>
                    <div class="explanation">
                        <p>å®˜èƒ½åŸºåŒå£«ãŒåå¿œã—ã¦çµåˆã—ã€å°åˆ†å­ï¼ˆæ°´ãªã©ï¼‰ãŒå‰¯ç”Ÿæˆç‰©ã¨ã—ã¦ç”Ÿæˆã•ã‚Œã‚‹é‡åˆã§ã™ã€‚</p>
                    </div>
                    
                    <div class="reaction-animation" id="condensationPolymer">
                        <div class="monomer">
                            COOH
                            <div class="functional-group">-OH</div>
                        </div>
                        <div style="font-size: 2rem; color: #667eea;">+</div>
                        <div class="monomer">
                            NHâ‚‚
                            <div class="functional-group">-H</div>
                        </div>
                        <div style="font-size: 2rem; color: #667eea;">â†’</div>
                        <div class="monomer">-CO-NH-</div>
                        <div style="font-size: 2rem; color: #667eea;">+</div>
                        <div class="byproduct">Hâ‚‚O</div>
                    </div>
                    
                    <button onclick="startCondensationPolymerization()">ç¸®åˆé‡åˆé–‹å§‹ï¼</button>
                    <p><strong>ä¾‹ï¼š</strong> ãƒŠã‚¤ãƒ­ãƒ³ã€ãƒãƒªã‚¨ã‚¹ãƒ†ãƒ«ã€ã‚¿ãƒ³ãƒ‘ã‚¯è³ª</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>7. ã¾ã¨ã‚ã‚¯ã‚¤ã‚º</h2>
            <div class="polymer-demo">
                <h3>ğŸ¯ ç†è§£åº¦ãƒã‚§ãƒƒã‚¯</h3>
                <div id="quiz-container">
                    <div class="explanation">
                        <h4 id="quiz-question">å•é¡Œ1: NaClã®çµåˆã§èµ·ã“ã‚‹ã“ã¨ã¯ï¼Ÿ</h4>
                        <div style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin: 20px 0;">
                            <button onclick="checkAnswer('electron-transfer', 1)">é›»å­ãŒå®Œå…¨ã«ç§»å‹•</button>
                            <button onclick="checkAnswer('electron-sharing', 1)">é›»å­ã‚’å…±æœ‰</button>
                            <button onclick="checkAnswer('electron-sea', 1)">é›»å­ã®æµ·ã‚’å½¢æˆ</button>
                        </div>
                        <div id="quiz-result" style="margin-top: 20px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedAtoms = [];
        let currentQuizQuestion = 1;
        const totalQuestions = 3;

        const electronegativity = {
            'H': 2.1, 'O': 3.5, 'C': 2.5, 'N': 3.0, 
            'F': 4.0, 'Na': 0.9, 'Cl': 3.0
        };

        const valenceElectrons = {
            'H': 1, 'O': 6, 'C': 4, 'N': 5, 
            'F': 7, 'Na': 1, 'Cl': 7
        };

        const quizData = [
            {
                question: "å•é¡Œ1: NaClã®çµåˆã§èµ·ã“ã‚‹ã“ã¨ã¯ï¼Ÿ",
                correct: "electron-transfer",
                explanation: "ãƒŠãƒˆãƒªã‚¦ãƒ (0.9)ã¨å¡©ç´ (3.0)ã®é›»æ°—é™°æ€§åº¦ã®å·®ã¯2.1ã§å¤§ãã„ãŸã‚ã€é›»å­ãŒå®Œå…¨ã«ç§»å‹•ã—ã¦ã‚¤ã‚ªãƒ³çµåˆã‚’å½¢æˆã—ã¾ã™ï¼"
            },
            {
                question: "å•é¡Œ2: Hâ‚‚OãŒæ¥µæ€§ã‚’æŒã¤ç†ç”±ã¯ï¼Ÿ",
                correct: "asymmetric",
                explanation: "æ°´åˆ†å­ã¯æŠ˜ã‚Œç·šå½¢ã§éå¯¾ç§°ãªãŸã‚ã€é…¸ç´ å´ã«é›»å­é›²ãŒåã£ã¦æ¥µæ€§ã‚’æŒã¡ã¾ã™ï¼"
            },
            {
                question: "å•é¡Œ3: ç¸®åˆé‡åˆã®ç‰¹å¾´ã¯ï¼Ÿ",
                correct: "byproduct",
                explanation: "ç¸®åˆé‡åˆã§ã¯å®˜èƒ½åŸºãŒåå¿œã™ã‚‹éš›ã«æ°´ãªã©ã®å°åˆ†å­ãŒå‰¯ç”Ÿæˆç‰©ã¨ã—ã¦ç”Ÿæˆã•ã‚Œã¾ã™ï¼"
            }
        ];

        function selectElement(symbol, en, valence) {
            if (selectedAtoms.length < 2) {
                const arena = document.getElementById('bondArena');
                const atomContainer = createAtomWithElectrons(symbol, valence);
                
                const x = 100 + selectedAtoms.length * 300;
                const y = 200;
                
                atomContainer.style.left = x + 'px';
                atomContainer.style.top = y + 'px';
                
                arena.appendChild(atomContainer);
                selectedAtoms.push({
                    element: symbol, 
                    electronegativity: en, 
                    valence: valence,
                    x: x, 
                    y: y,
                    container: atomContainer
                });
                
                if (selectedAtoms.length === 2) {
                    setTimeout(() => createBond(), 1000);
                }
            }
        }

        function createAtomWithElectrons(symbol, valence) {
            const container = document.createElement('div');
            container.className = 'atom-with-electrons';
            
            const nucleus = document.createElement('div');
            nucleus.className = `atom-nucleus nucleus-${symbol.toLowerCase()}`;
            nucleus.textContent = symbol;
            
            const shell = document.createElement('div');
            shell.className = 'electron-shell valence-shell';
            
            for (let i = 0; i < valence; i++) {
                const electron = document.createElement('div');
                electron.className = 'electron';
                electron.style.animationDelay = `${i * 0.3}s`;
                electron.style.transform = `rotate(${(360 / valence) * i}deg) translateX(45px) rotate(-${(360 / valence) * i}deg)`;
                shell.appendChild(electron);
            }
            
            container.appendChild(nucleus);
            container.appendChild(shell);
            
            return container;
        }

        function createBond() {
            const atom1 = selectedAtoms[0];
            const atom2 = selectedAtoms[1];
            const enDiff = Math.abs(atom1.electronegativity - atom2.electronegativity);
            
            let bondType, bondInfo;
            
            if (enDiff < 0.4) {
                bondType = "å…±æœ‰çµåˆ";
                bondInfo = `é›»æ°—é™°æ€§åº¦ã®å·®: ${enDiff.toFixed(1)}<br><strong>é›»å­ã‚’å…±æœ‰ã™ã‚‹å…±æœ‰çµåˆã§ã™ï¼</strong><br>ä¸¡åŸå­ãŒé›»å­ã‚’å…±æœ‰ã—ã¦å®‰å®šåŒ–ã—ã¾ã™ã€‚`;
                createCovalentBond(atom1, atom2);
            } else if (enDiff > 1.7) {
                bondType = "ã‚¤ã‚ªãƒ³çµåˆ";
                bondInfo = `é›»æ°—é™°æ€§åº¦ã®å·®: ${enDiff.toFixed(1)}<br><strong>é›»å­ãŒç§»å‹•ã™ã‚‹ã‚¤ã‚ªãƒ³çµåˆã§ã™ï¼</strong><br>${atom1.element}ã‹ã‚‰${atom2.element}ã¸é›»å­ãŒå®Œå…¨ã«ç§»å‹•ã—ã¾ã™ã€‚`;
                createIonicBond(atom1, atom2);
            } else {
                bondType = "æ¥µæ€§å…±æœ‰çµåˆ";
                bondInfo = `é›»æ°—é™°æ€§åº¦ã®å·®: ${enDiff.toFixed(1)}<br><strong>æ¥µæ€§ã®ã‚ã‚‹å…±æœ‰çµåˆã§ã™ï¼</strong><br>é›»å­ãŒ${atom2.electronegativity > atom1.electronegativity ? atom2.element : atom1.element}å´ã«åã‚Šã¾ã™ã€‚`;
                createPolarCovalentBond(atom1, atom2);
            }
            
            document.getElementById('bondInfo').innerHTML = 
                `<strong>${atom1.element}-${atom2.element}: ${bondType}</strong><br>${bondInfo}`;
        }

        function createCovalentBond(atom1, atom2) {
            const arena = document.getElementById('bondArena');
            
            // å…±æœ‰é›»å­å¯¾ã‚’ä½œæˆ
            const sharedPair = document.createElement('div');
            sharedPair.className = 'shared-electron-pair';
            sharedPair.style.left = (atom1.x + 150) + 'px';
            sharedPair.style.top = (atom1.y + 60) + 'px';
            
            const electron1 = document.createElement('div');
            electron1.className = 'shared-electron';
            const electron2 = document.createElement('div');
            electron2.className = 'shared-electron';
            electron2.style.animationDelay = '1s';
            
            sharedPair.appendChild(electron1);
            sharedPair.appendChild(electron2);
            arena.appendChild(sharedPair);
        }

        function createIonicBond(atom1, atom2) {
            // ã‚ˆã‚Šé›»æ°—é™°æ€§åº¦ã®ä½ã„åŸå­ã‹ã‚‰é«˜ã„åŸå­ã¸é›»å­ç§»å‹•
            const donor = atom1.electronegativity < atom2.electronegativity ? atom1 : atom2;
            const acceptor = atom1.electronegativity < atom2.electronegativity ? atom2 : atom1;
            
            // ã‚¤ã‚ªãƒ³é›»è·ã‚’è¿½åŠ 
            const donorCharge = document.createElement('div');
            donorCharge.className = 'ion-charge positive-charge';
            donorCharge.textContent = '+';
            donor.container.appendChild(donorCharge);
            
            const acceptorCharge = document.createElement('div');
            acceptorCharge.className = 'ion-charge negative-charge';
            acceptorCharge.textContent = '-';
            acceptor.container.appendChild(acceptorCharge);
            
            // é›»å­ã®ç§»å‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            const movingElectron = document.createElement('div');
            movingElectron.className = 'electron moving-electron';
            movingElectron.style.left = (donor.x + 60) + 'px';
            movingElectron.style.top = (donor.y + 60) + 'px';
            movingElectron.style.setProperty('--dx', (acceptor.x - donor.x) + 'px');
            movingElectron.style.setProperty('--dy', '0px');
            
            document.getElementById('bondArena').appendChild(movingElectron);
            
            setTimeout(() => {
                movingElectron.remove();
            }, 2000);
        }

        function createPolarCovalentBond(atom1, atom2) {
            const arena = document.getElementById('bondArena');
            
            // æ¥µæ€§ã‚’ç¤ºã™é›»å­é›²
            const cloud = document.createElement('div');
            cloud.className = 'electron-cloud';
            cloud.style.width = '80px';
            cloud.style.height = '50px';
            
            if (atom2.electronegativity > atom1.electronegativity) {
                cloud.style.left = (atom2.x + 40) + 'px';
                cloud.style.top = (atom2.y + 55) + 'px';
            } else {
                cloud.style.left = (atom1.x + 40) + 'px';
                cloud.style.top = (atom1.y + 55) + 'px';
            }
            
            arena.appendChild(cloud);
        }

        function clearArena() {
            const arena = document.getElementById('bondArena');
            const elements = arena.querySelectorAll('.atom-with-electrons, .shared-electron-pair, .electron-cloud, .moving-electron');
            
            elements.forEach(element => element.remove());
            
            selectedAtoms = [];
            document.getElementById('bondInfo').innerHTML = "åŸå­ã‚’2ã¤é¸ã‚“ã§é›»å­ã®å‹•ãã‚’è¦³å¯Ÿã—ã‚ˆã†ï¼<br>æ‹¬å¼§å†…ã¯æœ€å¤–æ®»é›»å­ã®æ•°ã§ã™ã€‚";
        }

        function showMoleculeTab(type) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(type + '-tab').classList.add('active');
        }

        function startAdditionPolymerization() {
            const container = document.getElementById('additionPolymer');
            container.innerHTML = '';
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤º
            const stages = [
                'C=C + C=C + C=C â†’',
                'åå¿œä¸­...',
                '-C-C-C-C-C-C- (ãƒãƒªãƒãƒ¼å®Œæˆï¼)'
            ];
            
            stages.forEach((stage, index) => {
                setTimeout(() => {
                    container.innerHTML = `<div style="font-size: 1.2rem; color: #667eea; font-weight: bold;">${stage}</div>`;
                }, index * 1500);
            });
        }

        function startCondensationPolymerization() {
            const container = document.getElementById('condensationPolymer');
            container.innerHTML = '';
            
            const stages = [
                'COOH + NHâ‚‚ â†’',
                'åå¿œä¸­...',
                '-CO-NH- + Hâ‚‚O â†‘ (ãƒãƒªãƒãƒ¼ + æ°´)'
            ];
            
            stages.forEach((stage, index) => {
                setTimeout(() => {
                    container.innerHTML = `<div style="font-size: 1.2rem; color: #667eea; font-weight: bold;">${stage}</div>`;
                }, index * 1500);
            });
        }

        function checkAnswer(answer, questionNum) {
            const result = document.getElementById('quiz-result');
            const currentQ = quizData[questionNum - 1];
            
            if (answer === currentQ.correct) {
                result.innerHTML = `<div style="color: #4ecdc4; font-weight: bold;">ğŸ‰ æ­£è§£ï¼</div><p>${currentQ.explanation}</p>`;
            } else {
                result.innerHTML = `<div style="color: #ff6b6b; font-weight: bold;">âŒ ä¸æ­£è§£</div><p>${currentQ.explanation}</p>`;
            }
            
            setTimeout(() => {
                if (currentQuizQuestion < totalQuestions) {
                    nextQuestion();
                } else {
                    result.innerHTML += '<div style="margin-top: 20px; font-weight: bold; color: #667eea;">ğŸŠ ã‚¯ã‚¤ã‚ºå®Œäº†ï¼ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼</div>';
                }
            }, 3000);
        }

        function nextQuestion() {
            currentQuizQuestion++;
            const questionElement = document.getElementById('quiz-question');
            const currentQ = quizData[currentQuizQuestion - 1];
            
            questionElement.textContent = currentQ.question;
            
            const buttonsContainer = document.querySelector('#quiz-container .explanation > div:nth-child(2)');
            buttonsContainer.innerHTML = '';
            
            if (currentQuizQuestion === 2) {
                const buttons = [
                    {text: 'å¯¾ç§°ã ã‹ã‚‰', value: 'symmetric'},
                    {text: 'éå¯¾ç§°ã ã‹ã‚‰', value: 'asymmetric'},
                    {text: 'é›»å­ãŒå¤šã„ã‹ã‚‰', value: 'electrons'}
                ];
                buttons.forEach(btn => {
                    const button = document.createElement('button');
                    button.textContent = btn.text;
                    button.onclick = () => checkAnswer(btn.value, currentQuizQuestion);
                    buttonsContainer.appendChild(button);
                });
            } else if (currentQuizQuestion === 3) {
                const buttons = [
                    {text: 'å‰¯ç”Ÿæˆç‰©ãŒã§ãã‚‹', value: 'byproduct'},
                    {text: 'äºŒé‡çµåˆãŒé–‹ã', value: 'double-bond'},
                    {text: 'é›»å­ãŒç§»å‹•ã™ã‚‹', value: 'electron-move'}
                ];
                buttons.forEach(btn => {
                    const button = document.createElement('button');
                    button.textContent = btn.text;
                    button.onclick = () => checkAnswer(btn.value, currentQuizQuestion);
                    buttonsContainer.appendChild(button);
                });
            }
            
            document.getElementById('quiz-result').innerHTML = '';
        }

        // åˆæœŸåŒ–
        window.addEventListener('load', function() {
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(50px)';
                section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            });
        });

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const scrollTop = window.pageYOffset;
                const windowHeight = window.innerHeight;
                
                if (scrollTop + windowHeight > sectionTop + 100) {
                    section.style.opacity = '1';
                    section.style.transform = 'translateY(0)';
                }
            });
        });
    </script>
</body>
</html>
